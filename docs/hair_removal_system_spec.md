# 脱毛店舗顧客管理システム 機能仕様書

## 目次
1. [エグゼクティブサマリー](#1-エグゼクティブサマリー)
2. [現状分析と課題定義](#2-現状分析と課題定義)
3. [システム概要と基本方針](#3-システム概要と基本方針)
4. [機能要件定義](#4-機能要件定義)
5. [詳細機能仕様](#5-詳細機能仕様)
6. [技術仕様](#6-技術仕様)
7. [非機能要件](#7-非機能要件)

## 1. エグゼクティブサマリー

### 1.1 プロジェクトの背景と目的
現在、脱毛店舗ではExcelシート「シンセサイザー」を用いて顧客管理を行っていますが、操作の煩雑さと分析手法の属人化により、効果的な顧客サポートが困難な状況です。本システムは、これらの課題を解決し、データドリブンな顧客管理を実現することを目的としています。

### 1.2 主要な解決課題
- **操作の標準化**：フィルター操作の自動化により作業時間を90%削減
- **分析の均一化**：全担当者が同一基準で顧客分析を実施可能
- **フォロー対象の明確化**：対象顧客の自動抽出と優先順位付け
- **損失の可視化**：リアルタイムでの損失金額把握と予測分析

### 1.3 システムの位置づけ
本システムは顧客データの管理・分析に特化し、実際の顧客へのコミュニケーション（LINE・電話連絡）は各担当者が従来通り実施します。システムは「誰に・いつ・どのような理由で」連絡すべきかを明確化する役割を担います。

## 2. 現状分析と課題定義

### 2.1 現行システム（Excel）の詳細分析

#### 2.1.1 データ構造
```
シート名：シンセサイザー
構成：
- 行：顧客情報（8,000～10,000件）
  - 顧客ID、氏名、担当者、契約コース、契約金額
- 列：月別来店記録（2023年9月～2025年7月）
  - セル値：来店回数（1～10回/月）
  - 色分け：水色（来店あり）、黄色（要注意）
```

#### 2.1.2 現行業務プロセス
1. **日次業務（約2時間/日）**
   - 来店記録の手動入力（30分）
   - フィルター設定による顧客抽出（45分）
   - 抽出結果の分析と優先順位付け（45分）

2. **週次業務（約4時間/週）**
   - 損失金額の手動計算（1時間）
   - 担当者別レポート作成（2時間）
   - フォロー結果の集計（1時間）

3. **月次業務（約8時間/月）**
   - 全体分析レポート作成（4時間）
   - 担当者評価資料作成（2時間）
   - 次月戦略立案（2時間）

### 2.2 課題の定量分析

#### 2.2.1 業務効率の課題
- **時間的損失**：担当者1人あたり月40時間の非生産的作業
- **機会損失**：フォロー遅延による月間200万円の売上損失
- **品質のばらつき**：担当者間で最大3倍の成果格差

#### 2.2.2 データ品質の課題
- **入力ミス率**：全データの約5%に誤入力
- **更新遅延**：平均2日の記録遅延
- **分析精度**：手動計算による10%の誤差

### 2.3 ステークホルダー分析

| ステークホルダー | 現状の課題 | システム化への期待 |
|---|---|---|
| 店舗マネージャー | 全体把握の困難、報告資料作成の負担 | リアルタイムダッシュボード、自動レポート |
| 担当スタッフ | 煩雑な操作、分析スキル不足 | 簡単操作、自動抽出、フォロー対象の明確化 |
| 経営層 | データの信頼性不足、意思決定の遅延 | 正確なデータ、予測分析、損失可視化 |

## 3. システム概要と基本方針

### 3.1 システムビジョン
「誰でも簡単に、データに基づいた最適な顧客フォロー対象を特定できる分析プラットフォーム」

### 3.2 設計原則
1. **モバイル最適化**：スマートフォンでの利用を前提としたUI設計
2. **シンプルさ優先**：3タップ以内で主要機能にアクセス
3. **自動化の追求**：定型業務の90%以上を自動化
4. **リアルタイム性**：データ更新から分析まで1秒以内
5. **セキュリティ重視**：個人情報保護法準拠の設計

### 3.3 システムアーキテクチャ
```
┌─────────────────────────────────────────────┐
│           プレゼンテーション層              │
│  モバイル最適化Web UI / レスポンシブ対応    │
├─────────────────────────────────────────────┤
│            ビジネスロジック層               │
│  顧客管理 / 分析 / フォロー対象抽出         │
├─────────────────────────────────────────────┤
│             データアクセス層                │
│  ORM / キャッシュ / トランザクション管理    │
├─────────────────────────────────────────────┤
│              データ層                       │
│  RDB / 分析用データストア                  │
└─────────────────────────────────────────────┘
```

## 4. 機能要件定義

### 4.1 機能体系図
```
顧客管理システム
├── 基本機能
│   ├── ユーザー管理（ログイン、権限）
│   ├── 顧客情報管理（登録、編集、検索）
│   └── 来店記録管理（記録、履歴、集計）
├── 分析機能
│   ├── 顧客抽出（条件指定、自動抽出）
│   ├── 損失分析（金額計算、傾向分析）
│   └── 予測分析（離脱リスク、来店予測）
├── フォロー管理機能
│   ├── 対象者リスト（優先順位付け）
│   ├── フォロー記録（実施状況、結果）
│   └── 効果測定（来店率、反応率）
└── レポート機能
    ├── ダッシュボード（KPI表示）
    ├── 定型レポート（日次、月次）
    └── データエクスポート（CSV、Excel）
```

### 4.2 ユーザーストーリー

#### 4.2.1 店舗マネージャーとして
- スマートフォンで店舗全体の状況を把握したい
- 担当者別のフォロー実施状況を確認したい
- 月次報告資料用のデータを簡単に取得したい

#### 4.2.2 担当スタッフとして
- 今日連絡すべき顧客リストをスマホで確認したい
- 顧客の来店履歴を外出先でも確認したい
- フォロー結果を簡単に記録したい

## 5. 詳細機能仕様

### 5.1 基本機能モジュール

#### 5.1.1 顧客マスタ管理
**基本情報管理**
```
必須項目：
- 顧客ID（自動採番、形式：C-YYYYMMDD-XXXX）
- 氏名（姓名分離、ふりがな自動生成）
- 担当者（プライマリ/セカンダリ設定可）
- 契約情報（コース、金額、期間、残回数）
- 最終来店日（自動更新）

管理項目：
- 顧客ステータス（アクティブ/要注意/休眠/離脱リスク）
- 来店パターン（平均間隔、頻度変化）
- 特記事項（フリーテキスト）
```

**顧客ステータス自動判定**
- アクティブ：30日以内に来店
- 要注意：31-60日未来店
- 休眠：61日以上未来店
- 離脱リスク：来店頻度30%以上低下

#### 5.1.2 来店記録管理
**記録機能**
- ワンタップ来店記録（当日分）
- 過去日付の来店記録修正
- 月別来店回数の自動集計
- 来店履歴のカレンダー表示

**自動計算機能**
```python
# 来店パターン分析
def analyze_visit_pattern(customer_id):
    visits = get_visit_history(customer_id)
    
    # 平均来店間隔
    avg_interval = calculate_average_interval(visits)
    
    # 来店頻度の変化率
    frequency_change = calculate_frequency_change(visits)
    
    # 最終来店からの経過日数
    days_since_last = calculate_days_since_last(visits)
    
    return {
        'average_interval': avg_interval,
        'frequency_change': frequency_change,
        'days_since_last': days_since_last,
        'status': determine_status(avg_interval, days_since_last)
    }
```

### 5.2 分析機能

#### 5.2.1 顧客抽出機能
**プリセット抽出条件**
1. 「先月来店・今月未来店」
2. 「先月来店・今月予約なし」
3. 「3ヶ月以上未来店」
4. 「契約終了間近（残3回以下）」
5. 「高額契約者の休眠化」

**カスタム抽出**
- 期間指定（任意の月範囲）
- 来店回数条件（○回以上/以下）
- 契約金額範囲
- 担当者別フィルター
- 複合条件（AND/OR）

**抽出結果の活用**
```
抽出結果画面：
┌─────────────────────────────┐
│ 抽出条件：先月来店・今月未来店 │
│ 該当者数：45名                │
│ 推定損失：¥675,000           │
├─────────────────────────────┤
│ [優先度順に表示]              │
│ 1. 山田花子 ¥50,000 45日     │
│ 2. 鈴木一郎 ¥30,000 38日     │
│ 3. 佐藤美咲 ¥25,000 35日     │
└─────────────────────────────┘
```

#### 5.2.2 損失分析機能
**自動計算ロジック**
```
月間損失額 = Σ(未来店顧客の契約金額 × 損失係数)
損失係数 = 未来店期間 / 平均来店間隔
```

**分析ビュー**
- 担当者別損失額ランキング
- コース別損失傾向
- 時系列損失推移グラフ
- 損失要因分析（離脱理由カテゴリ）

#### 5.2.3 予測分析
**離脱リスクスコアリング**
```python
# シンプルな離脱予測モデル
risk_factors = {
    'days_since_last_visit': 0.4,    # 最終来店からの日数
    'frequency_decline': 0.3,         # 来店頻度の低下率
    'contract_usage_rate': 0.2,       # 契約消化率
    'season_factor': 0.1              # 季節要因
}

def calculate_churn_risk(customer):
    score = 0
    for factor, weight in risk_factors.items():
        score += calculate_factor_score(customer, factor) * weight
    return min(score, 100)  # 0-100のスコア
```

### 5.3 フォロー管理機能

#### 5.3.1 フォロー対象管理
**優先順位付けアルゴリズム**
```
優先度スコア = (離脱リスク × 40%) + (契約金額 × 30%) + 
               (未来店日数 × 20%) + (過去の反応率 × 10%)
```

**フォローリスト表示**
```
本日のフォロー対象（23名）
━━━━━━━━━━━━━━━━━━━━━
[高] 田中様（¥80,000）60日未来店
     前回反応：良好
     推奨：至急電話連絡
─────────────────────────
[中] 伊藤様（¥35,000）45日未来店
     前回反応：普通
     推奨：LINE後、反応なければ電話
━━━━━━━━━━━━━━━━━━━━━
```

#### 5.3.2 フォロー記録
**記録項目**
- 実施日時（自動記録）
- 連絡方法（LINE/電話/その他）
- 顧客反応（良好/普通/無反応/拒否）
- 次回アクション予定
- 備考（フリーテキスト）

**効果測定**
- フォロー後の来店率
- 方法別の反応率
- 担当者別の成功率
- 最適フォロータイミング分析

### 5.4 レポート機能

#### 5.4.1 モバイル最適化ダッシュボード
**メイン画面（スマートフォン表示）**
```
┌─────────────────────┐
│ 2024年11月         │
├─────────────────────┤
│ 本日の来店  12/15  │
│ ■■■■■■■□□□ 80%   │
├─────────────────────┤
│ 要フォロー   23名  │
│ [未対応 5] [完了18] │
├─────────────────────┤
│ 今月の損失予測     │
│ ¥450,000          │
├─────────────────────┤
│ [詳細分析へ]      │
└─────────────────────┘
```

#### 5.4.2 定型レポート
**自動生成レポート**
1. 日次レポート
   - 来店実績
   - フォロー実施状況
   - 明日の優先対応リスト

2. 月次レポート
   - 来店率推移
   - 損失分析
   - 担当者別パフォーマンス
   - 次月の重点対策

**エクスポート機能**
- CSV形式（Excel取込用）
- PDF形式（印刷・共有用）
- 画像形式（グラフのみ）

### 5.5 モバイルUI/UX設計

#### 5.5.1 画面設計原則
- タップしやすいボタンサイズ（最小44×44px）
- 親指で届く範囲に主要機能配置
- スワイプによる画面遷移
- 無限スクロール対応

#### 5.5.2 主要画面フロー
```
ログイン
  ↓
ダッシュボード
  ├→ 顧客検索
  │   └→ 顧客詳細
  │       └→ 来店記録
  ├→ 本日のフォロー
  │   └→ フォロー記録
  └→ 分析
      ├→ 抽出条件選択
      └→ 結果表示
          └→ エクスポート
```

## 6. 技術仕様

### 6.1 システム構成
```
フロントエンド：
- フレームワーク：React / Vue.js
- UIライブラリ：Ant Design Mobile / Vant
- 状態管理：Redux / Vuex
- PWA対応（オフライン機能）

バックエンド：
- 言語：Python / Node.js
- フレームワーク：FastAPI / Express
- 認証：JWT
- キャッシュ：Redis

データベース：
- メインDB：PostgreSQL
- セッション：Redis

インフラ：
- クラウド：AWS / GCP
- CDN：CloudFront / Cloud CDN
```

### 6.2 API設計
```yaml
# 主要エンドポイント
/api/v1/customers:
  get: 顧客一覧（ページネーション対応）
  post: 顧客登録

/api/v1/customers/{id}/visits:
  get: 来店履歴
  post: 来店記録

/api/v1/analysis/extract:
  post: 条件抽出実行

/api/v1/follow-ups:
  get: フォロー対象一覧
  post: フォロー記録
```

### 6.3 セキュリティ
- HTTPS必須
- JWT認証（有効期限24時間）
- 個人情報の暗号化保存
- アクセスログの記録
- SQLインジェクション対策

## 7. 非機能要件

### 7.1 パフォーマンス要件
| 機能 | 目標値 | 測定条件 |
|---|---|---|
| 画面表示 | 2秒以内 | 3G回線 |
| 検索処理 | 3秒以内 | 1万件データ |
| 抽出処理 | 5秒以内 | 複合条件 |
| 同時接続 | 100ユーザー | ピーク時 |

### 7.2 可用性要件
- システム稼働率：99.5%以上
- 計画停止：月1回、深夜2時間以内
- バックアップ：日次自動実行
- データ保持期間：5年間

### 7.3 ユーザビリティ要件
- モバイルファースト設計
- 直感的な操作（マニュアル不要）
- エラーメッセージの分かりやすさ
- オフライン時の適切な動作

### 7.4 互換性要件
- ブラウザ：Chrome、Safari、Edge（最新2バージョン）
- OS：iOS 14以上、Android 10以上
- 画面サイズ：5インチ以上のスマートフォン
- Excel形式でのデータ入出力対応

## まとめ

本機能仕様書は、脱毛店舗における顧客管理業務の効率化と標準化を実現するためのシステム設計書です。モバイルファーストの設計により、担当者がいつでもどこでも必要な情報にアクセスし、適切なタイミングで顧客フォローを実施できる環境を提供します。

システムは顧客データの管理・分析に特化し、実際の顧客コミュニケーションは担当者の裁量に委ねることで、データに基づく判断と人間的な対応の最適なバランスを実現します。これにより、顧客満足度の向上と業務効率化を同時に達成することが可能となります。